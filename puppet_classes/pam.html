<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Puppet Class: pam
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "puppet_classes::pam";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (p)</a> &raquo;
    <span class='title'><span class='object_link'>Puppet Classes</span></span>
     &raquo; 
    <span class="title">pam</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="../puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Puppet Class: pam</h1>
<div class="box_info">
  
  
  <dl>
    <dt>Inherited by:</dt>
    <dd>
      
      <span class='object_link'><a href="pam_3A_3Aaccesslogin.html" title="puppet_classes::pam::accesslogin (puppet_class)">pam::accesslogin</a></span><br/>
      
    </dd>
  </dl>
  
  <dl>
    <dt>Defined in:</dt>
    <dd>
      manifests/init.pp
    </dd>
  </dl>
</div>

  <h2>Summary</h2>
  This module manages PAM.

<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
  </div>
</div>



<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Declaring the class</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_include'>include</span> <span class='id identifier rubyid_pam'>pam</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>allowed_users</span>
      
      
        <span class='type'>(<tt>Variant[Array, Hash, String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;root&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>String, Array or Hash of strings and/or arrays to configure users and origins in access.conf. The default allows the root user/group from origin &#39;ALL&#39;.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>login_pam_access</span>
      
      
        <span class='type'>(<tt>Enum['absent', 'optional', 'required', 'requisite', 'sufficient']</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;required&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Control module to be used for pam_access.so for login. Valid values are &#39;required&#39;, &#39;requisite&#39;, &#39;sufficient&#39;, &#39;optional&#39; and &#39;absent&#39;.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sshd_pam_access</span>
      
      
        <span class='type'>(<tt>Enum['absent', 'optional', 'required', 'requisite', 'sufficient']</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;required&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Control module to be used for pam_access.so for sshd. Valid values are &#39;required&#39;, &#39;requisite&#39;, &#39;sufficient&#39;, &#39;optional&#39; and &#39;absent&#39;.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>limits_fragments</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Hash of fragments to pass to pam::limits::fragments</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>limits_fragments_hiera_merge</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Boolean to control merges of all found instances of pam::limits_fragments in Hiera. This is useful for specifying fragments at different levels of the hierarchy and having them all included in the catalog.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>package_name</span>
      
      
        <span class='type'>(<tt>Optional[Variant[Array, String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>String or Array of packages providing the pam functionality. If undef, parameter is set based on the OS version.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_conf_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.conf&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Absolute path to pam.conf.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>services</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Hash of pam::service entries to be created.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_d_login_oracle_options</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Allow array of extra lines at the bottom of pam.d/login for oracle systems on EL5.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_d_login_path</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/login&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Absolute path to PAM login file.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_d_login_owner</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;root&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Owner of $pam_d_login_path.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_d_login_group</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;root&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Group of $pam_d_login_path.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_d_login_mode</span>
      
      
        <span class='type'>(<tt>Stdlib::Filemode</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;0644&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Mode of $pam_d_login_path.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_d_login_template</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Content template of $pam_d_login_path. If undef, parameter is set based on the OS version.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_d_sshd_path</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/sshd&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>PAM sshd path.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_d_sshd_owner</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;root&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Owner of $pam_d_sshd_path.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_d_sshd_group</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;root&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Group of $pam_d_sshd_path.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_d_sshd_mode</span>
      
      
        <span class='type'>(<tt>Stdlib::Filemode</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;0644&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Mode of $pam_d_sshd_path.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_d_sshd_template</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Content template of $pam_d_sshd_path. If undef, parameter is set based on the OS version. For cases where a full customization of the sshd PAM configuration is required, set pam_d_sshd_template to use pam/sshd.custom.erb that is provided with this module. pam/sshd.custom.erb must be further configured with the parameters pam_sshd_auth_lines, pam_sshd_account_lines, pam_sshd_password_lines and pam_sshd_session_lines. Note that the pam_d_sshd_template parameter is a no-op on Solaris.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_sshd_auth_lines</span>
      
      
        <span class='type'>(<tt>Optional[Array]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An ordered array of strings that define the content for PAM sshd auth. This setting is required and only valid if pam_d_sshd_template is configured to use the pam/sshd.custom.erb template.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_sshd_account_lines</span>
      
      
        <span class='type'>(<tt>Optional[Array]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An ordered array of strings that define the content for PAM sshd account. This setting is required and only valid if pam_d_sshd_template is configured to use the pam/sshd.custom.erb template.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_sshd_password_lines</span>
      
      
        <span class='type'>(<tt>Optional[Array]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An ordered array of strings that define the content for PAM sshd password. This setting is required and only valid if pam_d_sshd_template is configured to use the pam/sshd.custom.erb template.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_sshd_session_lines</span>
      
      
        <span class='type'>(<tt>Optional[Array]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An ordered array of strings that define the content for PAM sshd session. This setting is required and only valid if pam_d_sshd_template is configured to use the pam/sshd.custom.erb template.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_auth_lines</span>
      
      
        <span class='type'>(<tt>Optional[Array]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An ordered array of strings that define the content for PAM auth. If undef, parameter is set based on the OS version.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_account_lines</span>
      
      
        <span class='type'>(<tt>Optional[Array]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An ordered array of strings that define the content for PAM account. If undef, parameter is set based on the OS version.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_password_lines</span>
      
      
        <span class='type'>(<tt>Optional[Array]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An ordered array of strings that define the content for PAM password. If undef, parameter is set based on the OS version.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_session_lines</span>
      
      
        <span class='type'>(<tt>Optional[Array]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An ordered array of strings that define the content for PAM session. If undef, parameter is set based on the OS version.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>other_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/other&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM other file. Used on Suse 9 and Solaris.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>common_auth_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/common-auth&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM common-auth file. Used on Debian/Ubuntu and Suse.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>common_auth_pc_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/common-auth-pc&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM common-auth-pc file. Used on Suse.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>common_account_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/common-account&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM common-account file. Used on Suse.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>common_account_pc_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/common-account-pc&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM common-account-pc file. Used on Suse.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>common_password_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/common-password&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM common-password file. Used on Suse.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>common_password_pc_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/common-password-pc&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM common-password-pc file. Used on Suse.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>common_session_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/common-session&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM common-session file. Used on Suse.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>common_session_pc_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/common-session-pc&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM common-session-pc file. Used on Suse.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>common_session_noninteractive_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/common-session-noninteractive&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM common-session-noninteractive file, which is the same as common-session-pc used on Suse. Used on Ubuntu 12.04 LTS.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>system_auth_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/system-auth&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM system-auth file. Used on RedHat.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>system_auth_ac_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/system-auth-ac&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM system-auth-ac file. Used on RedHat.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password_auth_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/password-auth&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM password-auth file. Used on RedHat.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password_auth_ac_file</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/pam.d/password-auth-ac&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Path to PAM password-auth-ac file. Used on RedHat.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_password_auth_lines</span>
      
      
        <span class='type'>(<tt>Optional[Array]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Array of lines used in content template of $password_auth_ac_file. If undef, parameter is set based on defaults for the detected platform.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_password_account_lines</span>
      
      
        <span class='type'>(<tt>Optional[Array]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Array of lines used in content template of $password_auth_ac_file. If undef, parameter is set based on defaults for the detected platform.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_password_password_lines</span>
      
      
        <span class='type'>(<tt>Optional[Array]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Array of lines used in content template of $password_auth_ac_file. If undef, parameter is set based on defaults for the detected platform.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pam_password_session_lines</span>
      
      
        <span class='type'>(<tt>Optional[Array]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Array of lines used in content template of $password_auth_ac_file. If undef, parameter is set based on defaults for the detected platform.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>manage_nsswitch</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Boolean to manage the inclusion of the nsswitch class.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>common_files</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Private, do not specify. Manage pam files where the entries match existing template names. These common_files* parameters are used internally to specify which files and names are needed. The data is coming out of Hiera in <code>data/os/</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>common_files_create_links</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Private, do not specify. If true, then symlinks are created from the suffixed files to the originals without the suffix.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>common_files_suffix</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Suffix added to the common_files entries for the filename.</p>
</div>
      
    </li>
  
</ul>



</div><div class="method_details_list">
  <table class="source_code">
    <tr>
      <td>
        <pre class="lines">


189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370</pre>
      </td>
      <td>
        <pre class="code"><span class="info file"># File 'manifests/init.pp', line 189</span>

class pam (
  Variant[Array, Hash, String] $allowed_users               = &#39;root&#39;,
  Enum[&#39;absent&#39;, &#39;optional&#39;, &#39;required&#39;, &#39;requisite&#39;, &#39;sufficient&#39;]
  $login_pam_access                                       = &#39;required&#39;,
  Enum[&#39;absent&#39;, &#39;optional&#39;, &#39;required&#39;, &#39;requisite&#39;, &#39;sufficient&#39;]
  $sshd_pam_access                                        = &#39;required&#39;,
  Optional[Variant[Array, String]] $package_name            = undef,
  Stdlib::Absolutepath $pam_conf_file                       = &#39;/etc/pam.conf&#39;,
  Optional[Hash] $services                                  = undef,
  Optional[Hash] $limits_fragments                          = undef,
  Boolean $limits_fragments_hiera_merge                     = false,
  Array $pam_d_login_oracle_options                         = [],
  Stdlib::Absolutepath $pam_d_login_path                    = &#39;/etc/pam.d/login&#39;,
  String $pam_d_login_owner                                 = &#39;root&#39;,
  String $pam_d_login_group                                 = &#39;root&#39;,
  Stdlib::Filemode $pam_d_login_mode                        = &#39;0644&#39;,
  Optional[String] $pam_d_login_template                    = undef,
  Stdlib::Absolutepath $pam_d_sshd_path                     = &#39;/etc/pam.d/sshd&#39;,
  String $pam_d_sshd_owner                                  = &#39;root&#39;,
  String $pam_d_sshd_group                                  = &#39;root&#39;,
  Stdlib::Filemode $pam_d_sshd_mode                         = &#39;0644&#39;,
  Optional[String] $pam_d_sshd_template                     = undef,
  Optional[Array] $pam_sshd_auth_lines                      = undef,
  Optional[Array] $pam_sshd_account_lines                   = undef,
  Optional[Array] $pam_sshd_password_lines                  = undef,
  Optional[Array] $pam_sshd_session_lines                   = undef,
  Optional[Array] $pam_auth_lines                           = undef,
  Optional[Array] $pam_account_lines                        = undef,
  Optional[Array] $pam_password_lines                       = undef,
  Optional[Array] $pam_session_lines                        = undef,
  Stdlib::Absolutepath $other_file                          = &#39;/etc/pam.d/other&#39;,
  Stdlib::Absolutepath $common_auth_file                    = &#39;/etc/pam.d/common-auth&#39;,
  Stdlib::Absolutepath $common_auth_pc_file                 = &#39;/etc/pam.d/common-auth-pc&#39;,
  Stdlib::Absolutepath $common_account_file                 = &#39;/etc/pam.d/common-account&#39;,
  Stdlib::Absolutepath $common_account_pc_file              = &#39;/etc/pam.d/common-account-pc&#39;,
  Stdlib::Absolutepath $common_password_file                = &#39;/etc/pam.d/common-password&#39;,
  Stdlib::Absolutepath $common_password_pc_file             = &#39;/etc/pam.d/common-password-pc&#39;,
  Stdlib::Absolutepath $common_session_file                 = &#39;/etc/pam.d/common-session&#39;,
  Stdlib::Absolutepath $common_session_pc_file              = &#39;/etc/pam.d/common-session-pc&#39;,
  Stdlib::Absolutepath $common_session_noninteractive_file  = &#39;/etc/pam.d/common-session-noninteractive&#39;,
  Stdlib::Absolutepath $system_auth_file                    = &#39;/etc/pam.d/system-auth&#39;,
  Stdlib::Absolutepath $system_auth_ac_file                 = &#39;/etc/pam.d/system-auth-ac&#39;,
  Stdlib::Absolutepath $password_auth_file                  = &#39;/etc/pam.d/password-auth&#39;,
  Stdlib::Absolutepath $password_auth_ac_file               = &#39;/etc/pam.d/password-auth-ac&#39;,
  Optional[Array] $pam_password_auth_lines                  = undef,
  Optional[Array] $pam_password_account_lines               = undef,
  Optional[Array] $pam_password_password_lines              = undef,
  Optional[Array] $pam_password_session_lines               = undef,
  Boolean $manage_nsswitch                                  = true,
  Array $common_files                                       = [],
  Boolean $common_files_create_links                        = false,
  Optional[String] $common_files_suffix                     = undef,
) {
  # Fail on unsupported platforms
  if $facts[&#39;os&#39;][&#39;family&#39;] == &#39;RedHat&#39; and !($facts[&#39;os&#39;][&#39;release&#39;][&#39;major&#39;] in [&#39;2&#39;,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;,&#39;8&#39;, &#39;9&#39;]) {
    fail(&quot;osfamily RedHat&#39;s os.release.major is &lt;${::facts[&#39;os&#39;][&#39;release&#39;][&#39;major&#39;]}&gt; and must be 2, 5, 6, 7, 8 or 9&quot;)
  }

  if $facts[&#39;os&#39;][&#39;family&#39;] == &#39;Solaris&#39; and !($facts[&#39;kernelrelease&#39;] in [&#39;5.9&#39;,&#39;5.10&#39;,&#39;5.11&#39;]) {
    fail(&quot;osfamily Solaris&#39; kernelrelease is &lt;${facts[&#39;kernelrelease&#39;]}&gt; and must be 5.9, 5.10 or 5.11&quot;)
  }

  if $facts[&#39;os&#39;][&#39;family&#39;] == &#39;Suse&#39; and !($facts[&#39;os&#39;][&#39;release&#39;][&#39;major&#39;] in [&#39;9&#39;,&#39;10&#39;,&#39;11&#39;,&#39;12&#39;,&#39;13&#39;,&#39;15&#39;]) {
    fail(&quot;osfamily Suse&#39;s os.release.major is &lt;${::facts[&#39;os&#39;][&#39;release&#39;][&#39;major&#39;]}&gt; and must be 9, 10, 11, 12, 13 or 15&quot;)
  }

  if $facts[&#39;os&#39;][&#39;name&#39;] == &#39;Debian&#39; and !($facts[&#39;os&#39;][&#39;release&#39;][&#39;major&#39;] in [&#39;7&#39;,&#39;8&#39;,&#39;9&#39;,&#39;10&#39;, &#39;11&#39;]) {
    fail(&quot;Debian&#39;s os.release.major is &lt;${facts[&#39;os&#39;][&#39;release&#39;][&#39;major&#39;]}&gt; and must be 7, 8, 9, 10 or 11&quot;)
  }

  if $facts[&#39;os&#39;][&#39;name&#39;] == &#39;Ubuntu&#39; and !($facts[&#39;os&#39;][&#39;release&#39;][&#39;major&#39;] in [&#39;12.04&#39;, &#39;14.04&#39;, &#39;16.04&#39;, &#39;18.04&#39;, &#39;20.04&#39;, &#39;22.04&#39;]) {
    fail(&quot;Ubuntu&#39;s os.release.major is &lt;${facts[&#39;os&#39;][&#39;release&#39;][&#39;major&#39;]}&gt; and must be 12.04, 14.04, 16.04, 18.04, 20.04 or 22.04&quot;)
  }

  if $pam_d_sshd_template == &#39;pam/sshd.custom.erb&#39; {
    unless $pam_sshd_auth_lines and
    $pam_sshd_account_lines and
    $pam_sshd_password_lines and
    $pam_sshd_session_lines {
      fail(&#39;pam_sshd_[auth|account|password|session]_lines required when using the pam/sshd.custom.erb template&#39;)
    }
  } else {
    if $pam_sshd_auth_lines or
    $pam_sshd_account_lines or
    $pam_sshd_password_lines or
    $pam_sshd_session_lines {
      fail(&#39;pam_sshd_[auth|account|password|session]_lines are only valid when pam_d_sshd_template is configured with the pam/sshd.custom.erb template&#39;) # lint:ignore:140chars
    }
  }

  if ($facts[&#39;os&#39;][&#39;family&#39;] in [&#39;RedHat&#39;,&#39;Suse&#39;,&#39;Debian&#39;]) {
    include pam::accesslogin
    include pam::limits

    package { $package_name:
      ensure =&gt; installed,
    }

    file { &#39;pam_d_login&#39;:
      ensure  =&gt; file,
      path    =&gt; $pam_d_login_path,
      content =&gt; template($pam_d_login_template),
      owner   =&gt; $pam_d_login_owner,
      group   =&gt; $pam_d_login_group,
      mode    =&gt; $pam_d_login_mode,
    }

    file { &#39;pam_d_sshd&#39;:
      ensure  =&gt; file,
      path    =&gt; $pam_d_sshd_path,
      content =&gt; template($pam_d_sshd_template),
      owner   =&gt; $pam_d_sshd_owner,
      group   =&gt; $pam_d_sshd_group,
      mode    =&gt; $pam_d_sshd_mode,
    }
  }

  if $manage_nsswitch {
    include nsswitch
  }

  if $services {
    $services.each |$key,$value| {
      ::pam::service { $key:
        * =&gt; $value,
      }
    }
  }

  if $limits_fragments {
    if $limits_fragments_hiera_merge {
      $limits_fragments_real = hiera_hash(&#39;pam::limits_fragments&#39;)
    } else {
      $limits_fragments_real = $limits_fragments
    }
    $limits_fragments_real.each |$key,$value| {
      ::pam::limits::fragment { $key:
        * =&gt; $value,
      }
    }
  }

  $common_files.each |$_common_file| {
    # Solaris specific group
    $_real_group = $facts[&#39;os&#39;][&#39;family&#39;] ? {
      &#39;Solaris&#39; =&gt; &#39;sys&#39;,
      default   =&gt; &#39;root&#39;,
    }
    # Solaris 9 &amp; 10 specific configuration file path and name
    case $facts[&#39;kernelrelease&#39;] {
      &#39;5.9&#39;,&#39;5.10&#39;: {
        $_resource_name = &#39;pam_conf&#39;
        $_real_path     = $pam_conf_file
      }
      default: {
        $_resource_name = &quot;pam_${_common_file}${common_files_suffix}&quot;
        $_real_path     = getvar(&quot;${_common_file}${common_files_suffix}_file&quot;)
      }
    }

    file { $_resource_name:
      ensure  =&gt; file,
      path    =&gt; $_real_path,
      content =&gt; template(&quot;pam/${_common_file}.erb&quot;),
      owner   =&gt; &#39;root&#39;,
      group   =&gt; $_real_group,
      mode    =&gt; &#39;0644&#39;,
      require =&gt; Package[$package_name],
    }

    if $common_files_create_links == true {
      file { &quot;pam_${_common_file}&quot;:
        ensure  =&gt; link,
        path    =&gt; getvar(&quot;${_common_file}_file&quot;),
        target  =&gt; getvar(&quot;${_common_file}${common_files_suffix}_file&quot;),
        owner   =&gt; &#39;root&#39;,
        group   =&gt; $_real_group,
        require =&gt; Package[$package_name],
      }
    }
  }
}</pre>
      </td>
    </tr>
  </table>
</div>
</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>